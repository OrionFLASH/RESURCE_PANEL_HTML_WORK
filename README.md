# Ресурсная панель (Resource Panel)

## Формулировка задачи и техническое задание

Проект представляет собой веб-приложение на чистом HTML/CSS/JavaScript для создания ресурсной панели с быстрым доступом к различным внутренним сервисам и инструментам организации. Панель обеспечивает удобную навигацию по рабочим ресурсам, группируя их по категориям, и включает в себя набор утилит для административных задач.

### Основные требования:
- Создание интуитивно понятного интерфейса с группировкой ресурсов
- Адаптивный дизайн для различных размеров экранов
- Проверка доступности ссылок в реальном времени
- Модальные окна для различных административных утилит
- Экспорт списка ссылок в CSV-формат

## Подробное описание решения

Проект реализован как одностраничное веб-приложение (SPA) на чистом HTML, CSS и JavaScript без использования внешних библиотек. Основные компоненты:

### Структура интерфейса:
1. **Контейнер с группами ресурсов** - сетка из карточек, каждая из которых представляет категорию сервисов
2. **Модальные окна** - всплывающие диалоги для различных утилит:
   - Декодер permission (расшифровка HEX-прав)
   - Проверка роли сотрудника (ПСИ)
   - Генератор скриптов для SalesHeroes
   - Генераторы для AddressBook (по ТН и коду подразделения)
   - Выгрузка данных по новостям и наградам
   - Выгрузка профилей по табельным номерам
3. **Адаптивная сетка** - автоматическое изменение количества колонок в зависимости от размера экрана

### Функциональные возможности:
- Автоматическая проверка доступности ссылок при загрузке страницы
- Визуальная индикация недоступных ресурсов
- Генерация JavaScript-скриптов для DevTools
- Экспорт всех ссылок в CSV-файл
- Копирование учетных данных в буфер обмена по клику на определенные ссылки

## Полный список переменных и функций

### CSS Переменные (Custom Properties)

```css
--sber-green: #21A038          /* Основной зеленый цвет Сбера */
--sber-light-green: #C2E834    /* Светло-зеленый акцент */
--sber-blue: #0067FF           /* Синий цвет */
--sber-dark-bg: #17212b        /* Основной темный фон */
--sber-dark-bg2: #222e3a       /* Фон групп */
--sber-dark-border: #28394b    /* Цвет границ */
--sber-dark-card: #243647      /* Фон кнопок и карточек */
--sber-white: #fff             /* Белый цвет */
--sber-gray-txt: #e8eef2       /* Серый текст */
--sber-black: #151515          /* Черный цвет */
--sber-red: #F05228            /* Красный цвет для ошибок */
--sber-border: #3a556e         /* Дополнительный цвет границ */
```

**Назначение:** Централизованное управление цветовой схемой приложения в стиле корпоративного дизайна Сбербанка.

### JavaScript Функции

#### `adjustTopActions()`
**Назначение:** Адаптирует расположение кнопок верхнего блока в зависимости от количества групп на странице.

**Пример использования:**
```javascript
adjustTopActions(); // Вызывается автоматически при загрузке и изменении размера окна
```

#### `setStatus(card, isAvailable)`
**Параметры:**
- `card` (HTMLElement) - элемент карточки ссылки
- `isAvailable` (boolean) - флаг доступности ресурса

**Назначение:** Устанавливает визуальный статус доступности для карточки ссылки (зеленый/серый).

**Пример использования:**
```javascript
setStatus(cardElement, true);  // Помечает как доступную
setStatus(cardElement, false); // Помечает как недоступную
```

#### `checkCard(card)`
**Параметры:**
- `card` (HTMLElement) - элемент карточки с ссылкой

**Назначение:** Асинхронно проверяет доступность URL через HEAD-запрос и обновляет статус карточки.

**Пример использования:**
```javascript
checkCard(document.querySelector('.ios-card')); // Проверяет одну карточку
```

#### `checkAllCards()`
**Назначение:** Проверяет доступность всех ссылок на странице и анимирует прогресс-бар.

**Пример использования:**
```javascript
checkAllCards(); // Вызывается автоматически при загрузке и каждые 2 минуты
```

#### `generateScriptSber(type)`
**Параметры:**
- `type` (string) - тип окружения: 'alpha' или 'sigma'

**Назначение:** Генерирует JavaScript-скрипт для DevTools для выгрузки данных лидеров из SalesHeroes по указанным Tournament ID.

**Пример использования:**
```javascript
generateScriptSber('alpha');  // Генерирует скрипт для Alpha-окружения
generateScriptSber('sigma');  // Генерирует скрипт для Sigma-окружения
```

#### `generateNewsScript(env)`
**Параметры:**
- `env` (string) - окружение: 'alpha' или 'sigma'

**Назначение:** Генерирует скрипт для выгрузки деталей новостей по их кодам.

**Пример использования:**
```javascript
generateNewsScript('alpha'); // Генерирует скрипт для Alpha
```

#### `buildRewardScript({codes, baseUrl, cookie})`
**Параметры:**
- `codes` (Array<string>) - массив кодов наград
- `baseUrl` (string) - базовый URL API
- `cookie` (string) - cookie для аутентификации

**Назначение:** Строит скрипт для выгрузки данных по наградам (rewards) с пагинацией.

**Пример использования:**
```javascript
buildRewardScript({
  codes: ['r_01_2025-0_10-1_2'],
  baseUrl: 'https://efs-our-business-prom.omega.sbrf.ru/bo/rmkib.gamification/api/v1/badges/',
  cookie: document.cookie
});
```

#### `formatTabNumbers(input)`
**Параметры:**
- `input` (string) - строка с табельными номерами, разделенными любыми символами

**Возвращает:** Array<string> - массив отформатированных табельных номеров (8 цифр с ведущими нулями)

**Назначение:** Парсит и форматирует табельные номера из произвольного текстового ввода.

**Пример использования:**
```javascript
formatTabNumbers('12345, 54321; 13579'); 
// Возвращает: ['00012345', '00054321', '00013579']
```

#### `generateProfileScript(baseUrl)`
**Параметры:**
- `baseUrl` (string) - базовый URL API (Alpha или Sigma)

**Назначение:** Генерирует скрипт для выгрузки профилей сотрудников по табельным номерам.

**Пример использования:**
```javascript
generateProfileScript('https://efs-our-business-prom.omega.sbrf.ru');
```

### HTML Элементы и их ID

- `permission-modal` - модальное окно декодера permission
- `role-modal` - модальное окно проверки роли
- `scriptgen-modal` - модальное окно генератора скриптов SalesHeroes
- `tn-modal` - модальное окно генератора по табельным номерам
- `dep-modal` - модальное окно генератора по коду подразделения
- `news-modal` - модальное окно выгрузки новостей
- `reward-modal` - модальное окно выгрузки наград
- `profile-modal` - модальное окно выгрузки профилей
- `progress-bar` - индикатор прогресса проверки ссылок
- `export-links-btn-link` - кнопка экспорта ссылок в CSV

## История версий (Version Control)

### Версия 1.0.0 (Текущая)
**Дата создания:** 2025-01-XX

**Реализованный функционал:**
- ✅ Создана базовая структура HTML-страницы с адаптивным дизайном
- ✅ Реализована система группировки ресурсов по категориям
- ✅ Добавлена автоматическая проверка доступности ссылок
- ✅ Реализованы модальные окна для административных утилит:
  - Декодер permission (HEX → биты)
  - Проверка роли сотрудника в ПСИ
  - Генератор скриптов LeadersForAdmin для SalesHeroes
  - Генераторы для AddressBook (по ТН и подразделениям)
  - Выгрузка данных по новостям (Alpha/Sigma)
  - Выгрузка данных по наградам (Reward)
  - Выгрузка профилей по табельным номерам
- ✅ Реализован экспорт всех ссылок в CSV-формат
- ✅ Добавлена функциональность копирования учетных данных в буфер обмена
- ✅ Настроена адаптивная сетка для различных размеров экранов
- ✅ Применена цветовая схема в стиле корпоративного дизайна

**Решенные проблемы:**
- Проблема с проверкой доступности ссылок через CORS решена использованием режима 'no-cors'
- Оптимизирована производительность проверки ссылок с добавлением задержек между запросами
- Реализована корректная обработка ошибок при генерации скриптов
- Добавлена валидация входных данных для всех генераторов скриптов

**Технические детали:**
- Проект использует чистый HTML/CSS/JavaScript без внешних зависимостей
- Все стили инкапсулированы в `<style>` блоке
- JavaScript код разделен на логические секции с комментариями
- Применены современные CSS-технологии (Grid, Flexbox, Custom Properties)

## Структура проекта

```
RESURCE_PANEL_HTML_WORK/
├── index.html          # Основной HTML-файл приложения
├── README.md           # Документация проекта
└── .gitignore          # Игнорируемые файлы для Git
```

## Использование

1. Откройте `index.html` в любом современном браузере
2. Используйте карточки для быстрого доступа к ресурсам
3. Для административных задач используйте группу "Администрирование" (10-я группа)
4. Сгенерированные скрипты копируются в буфер обмена и запускаются в DevTools (F12) на соответствующих страницах

## Технические требования

- Современный браузер с поддержкой ES6+ (Chrome, Firefox, Safari, Edge)
- JavaScript должен быть включен
- Для работы некоторых функций требуется доступ к внутренним сервисам организации

## Примечания

- Все ссылки открываются в новых вкладках (`target="_blank"`)
- Проверка доступности ссылок выполняется автоматически при загрузке и каждые 2 минуты
- Некоторые функции требуют авторизации в соответствующих системах
- Сгенерированные скрипты используют cookie текущей сессии браузера

